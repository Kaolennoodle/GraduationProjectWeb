{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport request from \"@/utils/request\";\nimport SideBar from \"@/components/SideBar\";\nimport Header from \"@/components/Header\";\nexport default {\n  data: function data() {\n    return {\n      tableData: [],\n      loading: true,\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      form: {},\n      multipleSelection: [],\n      c_name: \"\",\n      c_volume: \"\",\n      c_address: \"\",\n      dialogFormVisible: false,\n      collapseBtnClass: 'el-icon-s-fold',\n      isCollapse: false,\n      sideWidth: 200\n    };\n  },\n  created: function created() {\n    //请求分页查询数据\n    this.load();\n  },\n  components: {\n    SideBar: SideBar,\n    Header: Header\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$bus.$on('changeCollapse', function (data) {\n      if (_this.isCollapse == true) {\n        _this.isCollapse = false;\n        console.log(\"菜单此时应为展开状态\", _this.isCollapse);\n        _this.collapseBtnClass = 'el-icon-s-fold';\n      } else if (_this.isCollapse == false) {\n        _this.isCollapse = true;\n        console.log(\"菜单此时应为折叠状态\", _this.isCollapse);\n        _this.collapseBtnClass = 'el-icon-s-unfold';\n      }\n    });\n  },\n  methods: {\n    //打开新增弹窗并将form置空\n    handleAdd: function handleAdd() {\n      this.dialogFormVisible = true;\n      this.form = {};\n    },\n    handleDialogCancel: function handleDialogCancel() {\n      this.dialogFormVisible = false;\n    },\n    handleEdit: function handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    handleDelete: function handleDelete(row) {\n      var _this2 = this;\n\n      request.delete(\"/classroom/\" + row.cid).then(function (res) {\n        if (res) {\n          _this2.$message.success({\n            showClose: true,\n            message: \"删除成功！\"\n          });\n\n          _this2.load();\n        } else {\n          _this2.$message.error({\n            showClose: true,\n            message: \"操作失败！请稍后再试\"\n          });\n        }\n      });\n    },\n    //批量删除\n    delBatch: function delBatch() {\n      var _this3 = this;\n\n      var c_ids = this.multipleSelection.map(function (v) {\n        return v.cid;\n      });\n      request.post(\"/classroom/del/batch/\", c_ids).then(function (res) {\n        if (res) {\n          _this3.$message.success({\n            showClose: true,\n            message: \"批量删除成功！\"\n          });\n\n          _this3.load();\n        } else {\n          _this3.$message.error({\n            showClose: true,\n            message: \"操作失败！请稍后再试\"\n          });\n        }\n      });\n    },\n    confirmBatchDel: function confirmBatchDel() {\n      var _this4 = this;\n\n      this.$confirm('此操作不可撤销, 是否继续?', '确认删除', {\n        confirmButtonText: '确认删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this4.delBatch();\n      }).catch(function () {});\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      console.log(val);\n      this.multipleSelection = val;\n    },\n    reset: function reset() {\n      this.c_name = \"\";\n      this.c_volume = \"\";\n      this.c_address = \"\";\n      this.load();\n    },\n    // 重新加载表格数据\n    load: function load() {\n      var _this5 = this;\n\n      this.loading = true;\n      request.get(\"http://localhost:8081/classroom/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          c_name: this.c_name,\n          c_volume: this.c_volume,\n          c_address: this.c_address\n        }\n      }).then(function (res) {\n        console.log(res);\n        _this5.tableData = res.records;\n        _this5.total = res.total;\n      });\n      /*fetch(\"http://localhost:8081/classroom/page?pageNum=\" + this.pageNum + \"&pageSize=\" + this.pageSize)\r\n          .then(res => res.json()).then(res => {\r\n        console.log(res)\r\n        this.tableData = res.data\r\n        this.total = res.total\r\n      })*/\n\n      this.loading = false;\n    },\n    // 新增或编辑的保存\n    save: function save() {\n      var _this6 = this;\n\n      request.post(\"http://localhost:8081/classroom\", this.form).then(function (res) {\n        if (res) {\n          _this6.dialogFormVisible = false;\n\n          _this6.$message.success({\n            showClose: true,\n            message: \"保存成功！\"\n          });\n\n          _this6.load();\n        } else {\n          _this6.$message.error({\n            showClose: true,\n            message: \"保存失败！请稍后再试\"\n          });\n        }\n      });\n    },\n    //分页相关\n    handleSizeChange: function handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      console.log(pageNum);\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AAEA;AACAA,MADA,kBACA;AACA;AACAC,mBADA;AAEAC,mBAFA;AAGAC,cAHA;AAIAC,gBAJA;AAKAC,kBALA;AAMAC,cANA;AAOAC,2BAPA;AAQAC,gBARA;AASAC,kBATA;AAUAC,mBAVA;AAWAC,8BAXA;AAYAC,wCAZA;AAaAC,uBAbA;AAcAC;AAdA;AAgBA,GAlBA;AAmBAC,SAnBA,qBAmBA;AACA;AACA;AACA,GAtBA;AAuBAC;AACAC,oBADA;AAEAC;AAFA,GAvBA;AA2BAC,SA3BA,qBA2BA;AAAA;;AACA;AACA;AACA;AACAC;AACA;AACA,OAJA,MAIA;AACA;AACAA;AACA;AACA;AACA,KAVA;AAWA,GAvCA;AAwCAC;AAEA;AACAC,aAHA,uBAGA;AACA;AACA;AACA,KANA;AAQAC,sBARA,gCAQA;AACA;AACA,KAVA;AAYAC,cAZA,sBAYAC,GAZA,EAYA;AACA;AACA;AACA,KAfA;AAiBAC,gBAjBA,wBAiBAD,GAjBA,EAiBA;AAAA;;AACAE;AACA;AACA;AACAC,2BADA;AAEAC;AAFA;;AAIA;AACA,SANA,MAMA;AACA;AACAD,2BADA;AAEAC;AAFA;AAIA;AACA,OAbA;AAcA,KAhCA;AAmCA;AACAC,YApCA,sBAoCA;AAAA;;AACA;AAAA;AAAA;AACAH;AACA;AACA;AACAC,2BADA;AAEAC;AAFA;;AAIA;AACA,SANA,MAMA;AACA;AACAD,2BADA;AAEAC;AAFA;AAIA;AACA,OAbA;AAcA,KApDA;AAqDAE,mBArDA,6BAqDA;AAAA;;AACA;AACAC,iCADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACA;AACA,OANA,EAMAC,KANA,CAMA,aAEA,CARA;AASA,KA/DA;AAkEAC,yBAlEA,iCAkEAC,GAlEA,EAkEA;AACAlB;AACA;AACA,KArEA;AAsEAmB,SAtEA,mBAsEA;AACA;AACA;AACA;AACA;AACA,KA3EA;AA8EA;AACAC,QA/EA,kBA+EA;AAAA;;AACA;AAEAb;AACAc;AACArC,+BADA;AAEAC,iCAFA;AAGAG,6BAHA;AAIAC,iCAJA;AAKAC;AALA;AADA,SAQAyB,IARA,CAQA;AACAf;AACA;AACA;AACA,OAZA;AAaA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,KAtGA;AAyGA;AACAsB,QA1GA,kBA0GA;AAAA;;AACAf;AACA;AACA;;AACA;AACAC,2BADA;AAEAC;AAFA;;AAIA;AACA,SAPA,MAOA;AACA;AACAD,2BADA;AAEAC;AAFA;AAIA;AACA,OAdA;AAeA,KA1HA;AA6HA;AACAc,oBA9HA,4BA8HAtC,QA9HA,EA8HA;AACAe;AACA;AACA;AACA,KAlIA;AAmIAwB,uBAnIA,+BAmIAxC,OAnIA,EAmIA;AACAgB;AACA;AACA;AACA;AAvIA;AAxCA","names":["data","tableData","loading","total","pageNum","pageSize","form","multipleSelection","c_name","c_volume","c_address","dialogFormVisible","collapseBtnClass","isCollapse","sideWidth","created","components","SideBar","Header","mounted","console","methods","handleAdd","handleDialogCancel","handleEdit","row","handleDelete","request","showClose","message","delBatch","confirmBatchDel","confirmButtonText","cancelButtonText","type","then","catch","handleSelectionChange","val","reset","load","params","save","handleSizeChange","handleCurrentChange"],"sourceRoot":"src/views","sources":["ManagerInterface.vue"],"sourcesContent":["<template>\r\n\r\n\r\n  <!--  左侧菜单栏-->\r\n  <el-container style=\"min-height: 100vh\">\r\n\r\n    <SideBar :is-collapse/>\r\n\r\n    <el-container>\r\n\r\n      <!--        顶部导航栏-->\r\n      <el-header\r\n          style=\"background-color: #DDEBFF; border-bottom: 1px solid #ccc\">\r\n        <Header :collapseBtnClass=\"collapseBtnClass\"/>\r\n      </el-header>\r\n\r\n\r\n      <!--      主框体-->\r\n      <el-main>\r\n\r\n        <!--        表示当前页面的子路由会在router-view里面展示-->\r\n        <router-view/>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n\r\n</template>\r\n\r\n<style>\r\n\r\n.el-header {\r\n  background-image: linear-gradient(to bottom right, rgb(13, 68, 200), rgb(33, 147, 255));\r\n\r\n  line-height: 60px;\r\n}\r\n\r\n/*.el-aside {*/\r\n/*  color: #333;*/\r\n/*}*/\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 200px;\r\n  min-height: 400px;\r\n}\r\n\r\n</style>\r\n\r\n<script>\r\n\r\n\r\nimport request from \"@/utils/request\";\r\nimport SideBar from \"@/components/SideBar\";\r\nimport Header from \"@/components/Header\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: true,\r\n      total: 0,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      form: {},\r\n      multipleSelection: [],\r\n      c_name: \"\",\r\n      c_volume: \"\",\r\n      c_address: \"\",\r\n      dialogFormVisible: false,\r\n      collapseBtnClass: 'el-icon-s-fold',\r\n      isCollapse: false,\r\n      sideWidth: 200,\r\n    }\r\n  },\r\n  created() {\r\n    //请求分页查询数据\r\n    this.load()\r\n  },\r\n  components: {\r\n    SideBar,\r\n    Header\r\n  },\r\n  mounted() {\r\n    this.$bus.$on('changeCollapse',(data)=>{\r\n      if (this.isCollapse == true) {\r\n        this.isCollapse = false\r\n        console.log(\"菜单此时应为展开状态\", this.isCollapse)\r\n        this.collapseBtnClass = 'el-icon-s-fold'\r\n      } else if (this.isCollapse == false) {\r\n        this.isCollapse = true\r\n        console.log(\"菜单此时应为折叠状态\", this.isCollapse)\r\n        this.collapseBtnClass = 'el-icon-s-unfold'\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n\r\n    //打开新增弹窗并将form置空\r\n    handleAdd() {\r\n      this.dialogFormVisible = true\r\n      this.form = {}\r\n    },\r\n\r\n    handleDialogCancel() {\r\n      this.dialogFormVisible = false\r\n    },\r\n\r\n    handleEdit(row) {\r\n      this.form = row\r\n      this.dialogFormVisible = true\r\n    },\r\n\r\n    handleDelete(row) {\r\n      request.delete(\"/classroom/\" + row.cid).then(res => {\r\n        if (res) {\r\n          this.$message.success({\r\n            showClose: true,\r\n            message: \"删除成功！\"\r\n          })\r\n          this.load()\r\n        } else {\r\n          this.$message.error({\r\n            showClose: true,\r\n            message: \"操作失败！请稍后再试\"\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    //批量删除\r\n    delBatch() {\r\n      let c_ids = this.multipleSelection.map(v => v.cid)\r\n      request.post(\"/classroom/del/batch/\", c_ids).then(res => {\r\n        if (res) {\r\n          this.$message.success({\r\n            showClose: true,\r\n            message: \"批量删除成功！\"\r\n          })\r\n          this.load()\r\n        } else {\r\n          this.$message.error({\r\n            showClose: true,\r\n            message: \"操作失败！请稍后再试\"\r\n          })\r\n        }\r\n      })\r\n    },\r\n    confirmBatchDel() {\r\n      this.$confirm('此操作不可撤销, 是否继续?', '确认删除', {\r\n        confirmButtonText: '确认删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.delBatch();\r\n      }).catch(() => {\r\n\r\n      });\r\n    },\r\n\r\n\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.multipleSelection = val\r\n    },\r\n    reset() {\r\n      this.c_name = \"\"\r\n      this.c_volume = \"\"\r\n      this.c_address = \"\"\r\n      this.load()\r\n    },\r\n\r\n\r\n    // 重新加载表格数据\r\n    load() {\r\n      this.loading = true\r\n\r\n      request.get(\"http://localhost:8081/classroom/page\", {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          c_name: this.c_name,\r\n          c_volume: this.c_volume,\r\n          c_address: this.c_address\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        this.tableData = res.records\r\n        this.total = res.total\r\n      })\r\n      /*fetch(\"http://localhost:8081/classroom/page?pageNum=\" + this.pageNum + \"&pageSize=\" + this.pageSize)\r\n          .then(res => res.json()).then(res => {\r\n        console.log(res)\r\n        this.tableData = res.data\r\n        this.total = res.total\r\n      })*/\r\n      this.loading = false\r\n    },\r\n\r\n\r\n    // 新增或编辑的保存\r\n    save() {\r\n      request.post(\"http://localhost:8081/classroom\", this.form).then(res => {\r\n        if (res) {\r\n          this.dialogFormVisible = false\r\n          this.$message.success({\r\n            showClose: true,\r\n            message: \"保存成功！\"\r\n          })\r\n          this.load()\r\n        } else {\r\n          this.$message.error({\r\n            showClose: true,\r\n            message: \"保存失败！请稍后再试\"\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    //分页相关\r\n    handleSizeChange(pageSize) {\r\n      console.log(pageSize)\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      console.log(pageNum)\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}